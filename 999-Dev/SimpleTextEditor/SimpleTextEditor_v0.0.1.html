<html>
	<head>
		<style>
			#editor {
				width: 500px;
				height: 100px;
				border: 1px solid;
				font: 20px monospace;
			}
			#calibrator{
				font: 20px monospace;
				border: 1px solid;
			}
			#calibratorInfo{
				width: 500px;
				border: 1px solid;
			}
			#cursorInfo {
				width: 500px;
				border: 1px solid;
			}
			#falseTextCursorInfo {
				width: 500px;
				border: 1px solid;
			}
			#falseTextCursor {
				visibility: hidden;
				position: absolute;
			}
			#fakeInput {
				position: absolute;
				background: transparent;
				border: 0 none;
				resize: none;
				color: white;
				outline: none;
			}
		</style>
		<script src="lib/jquery-3.1.0.min.js"></script>
		<script>
			$(function(){
				var calibrator = $("#calibrator");
				var textWidth = calibrator.width();
				var textHeight = calibrator.height();
				$("#calibratorWidth").append(textWidth);
				$("#calibratorHeight").append(textHeight);
				
				// click on the editor
				$("#editor").click(function(event){
					var cursorX = event.pageX;
					var cursorY = event.pageY;
					var row = Math.ceil(cursorY / textHeight);
					var col = Math.floor(cursorX / textWidth);
					$("#cursorRow").html(row);
					$("#cursorCol").html(col);
					console.log("Cursor Info");
					console.log("Row: " + row + " Col: " + col);
					
					// set position of the fake cursor
					var editorX = $("#editor").position().left;
					var editorY = $("#editor").position().top;
					var fakeCursorY = (row-1)*textHeight + editorY;
					var fakeCursorX = col*textWidth + editorX;
					$("#falseTextCursor").css({visibility: "visible"})
					$("#falseTextCursor").css({position: "absolute", top: fakeCursorY, left: fakeCursorX});
					
					// fakeInput
					$("#fakeInput").focus()
					$("#fakeInput").css({position: "absolute", top: fakeCursorY, left: fakeCursorX + textWidth});
				});
				
				$("#fakeInput").on('change keyup paste', function(){
					debugger;
				});
					
				
				// Fake Test Cursor
				setInterval(function(){
					$("#falseTextCursor").toggle();
				}, 500);
			});
		</script>
	</head>
	
	<body>
		<div id="editor">
			<span id="falseTextCursor">|</span>
			<textarea id="fakeInput"></textarea>
			<div>Testing!</div>
		</div>
		<div id="calibratorInfo">
			<div>Text Calibrator: <span id="calibrator">&nbsp;</span></div>
			<div>Width: <span id="calibratorWidth"></span></div>
			<div>Height: <span id="calibratorHeight"></span></div>
		</div>
		<div id="cursorInfo">
			<div>Cursor Info</div>
			<div>Row: <span id="cursorRow"></span> Col:<span id="cursorCol"></span></div>
		</div>
		<div id="falseTextCursorInfo">
			Text Cursor
			
		</div>
	</body>
</html>