<html>
	<head>
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
		<script>
			var pageLimit = 5;
		
			$.fn.pagingTable = function(){
				var me = this;
				me.index = me.parent().children().index(me);
				me.pagingRows = [];
				
				if(me.find("tbody").length > 0 ){
					var tbody = me.find("tbody");
					var rows = me.find("tbody>tr");
					var pageNum = Math.ceil(rows.length / pageLimit);
					var remainders = rows.splice(pageLimit);
					me.pagingRows.push(rows.toArray());
					if (pageNum > 1 ){
						for (var i=0; i<pageNum-1; i++){
							var newReminders = remainders.splice(pageLimit)
							me.pagingRows.push(remainders);
							remainders = newReminders;
						}
						// paging
						var paging = $("<div></div>");
						for (var i=0; i<pageNum; i++){
							var pageNumSpan = $("<span>" + (i+1) + "</span>");
							pageNumSpan.click(function(){
								var pageNum = parseInt($(this).html());
								if (pageNum){
									var rows = me.pagingRows[pageNum - 1];
									tbody.html(rows);
								}
							});
							paging.append(pageNumSpan);
						}
						me.append(paging);
					}
					tbody.html(me.pagingRows[0]);
				}
				
				if(me.find("thead").length > 0 ){
					var thead = me.find("thead");
					me.headers = thead.find("th");
					me.headers.click($.proxy(function(event){
						var me = this;
						var target = $(event.target);
						var index = me.headers.index(target);
						var rows = [];
						for (var i=0; i<me.pagingRows.length; i++){
							var pagingRows = me.pagingRows[i]
							for(var j=0; j<pagingRows.length; j++){
								var row = pagingRows[j];
								rows.push(row);
							}
						}
						rows.sort($.proxy(function(a,b){
							var index = this.index;
							var jA = $(a).find("td")[index];
							var jB = $(b).find("td")[index];
							var aValue = $(jA).html();
							var bValue = $(jB).html();
							return aValue.localeCompare(bValue);
						}, {index: index}));
						
						var remainders = rows.splice(pageLimit);
						me.pagingRows = [];
						me.pagingRows.push(rows);
						if (pageNum > 1 ){
							for (var i=0; i<pageNum-1; i++){
								var newReminders = remainders.splice(pageLimit)
								me.pagingRows.push(remainders);
								remainders = newReminders;
							}
						}
						tbody.html(me.pagingRows[0]);
						
					}, me));
				}
			};
			
			$(function(){
				$("#table").pagingTable();
			});
		</script>
	</head>

	<body>
		<h1>Paging Table</h1>
		<table id="table">
			<thead>
				<tr>
					<th>Header 1</th>
					<th>Header 2</th>
					<th>Header 3</th>
				</tr>				
			</thead>
			<tbody>
				<tr>
					<td>Data 7 1</td>
					<td>Data 7 2</td>
					<td>Data 7 3</td>
				</tr>
				<tr>
					<td>Data 1 1</td>
					<td>Data 1 2</td>
					<td>Data 1 3</td>
				</tr>
				<tr>
					<td>Data 2 1</td>
					<td>Data 2 2</td>
					<td>Data 2 3</td>
				</tr>
				<tr>
					<td>Data 3 1</td>
					<td>Data 3 2</td>
					<td>Data 3 3</td>
				</tr>
				<tr>
					<td>Data 4 1</td>
					<td>Data 4 2</td>
					<td>Data 4 3</td>
				</tr>
				<tr>
					<td>Data 5 1</td>
					<td>Data 5 2</td>
					<td>Data 5 3</td>
				</tr>
				<tr>
					<td>Data 6 1</td>
					<td>Data 6 2</td>
					<td>Data 6 3</td>
				</tr>

				<tr>
					<td>Data 8 1</td>
					<td>Data 8 2</td>
					<td>Data 8 3</td>
				</tr>
				<tr>
					<td>Data 9 1</td>
					<td>Data 9 2</td>
					<td>Data 9 3</td>
				</tr>
				<tr>
					<td>Data 10 1</td>
					<td>Data 10 2</td>
					<td>Data 10 3</td>
				</tr>
				<tr>
					<td>Data 11 1</td>
					<td>Data 11 2</td>
					<td>Data 11 3</td>
				</tr>
				<tr>
					<td>Data 12 1</td>
					<td>Data 12 2</td>
					<td>Data 12 3</td>
				</tr>
				<tr>
					<td>Data 13 1</td>
					<td>Data 13 2</td>
					<td>Data 13 3</td>
				</tr>
				<tr>
					<td>Data 14 1</td>
					<td>Data 14 2</td>
					<td>Data 14 3</td>
				</tr>
				<tr>
					<td>Data 15 1</td>
					<td>Data 15 2</td>
					<td>Data 15 3</td>
				</tr>
			</tbody>
		</table>
		<div>Testing</div>
	</body>
	
</html>