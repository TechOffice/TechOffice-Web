<html>

	<head>
		<title>IT Tech Office- Simple Form Designer v0.0.1</title>
        <!-- Jquery Core -->
		<script src="https://code.jquery.com/jquery-1.12.4.js"></script>
        <!-- Jquery UI -->
		<script src="https://code.jquery.com/ui/1.12.0/jquery-ui.js"></script>
		
		<style>
			.ui-selecting { 
				background: #707070 ;            
			}

			.ui-selected { 
				background: #EEEEEE; 
				color: #000000; 
			}
			div {
				padding: 10px;
				border: 1px solid;
			}
			
			.control {
				display: table;
			}

			.handle {
				display: table-cell;
			}

			.content {
				display: table-cell;
			}
		</style>
        <script>
			$( function() {
				$(".div").sortable({
					handle: ".handle",
					placeholder: "control-placeholder",
					connectWith: ".container, .div, td"
				});

				$("td").sortable({
					handle: ".handle",
					placeholder: "control-placeholder",
					connectWith: ".container, .div, td"
				});

				$(".container").sortable({
					handle: ".handle",
					placeholder: "control-placeholder",
					connectWith: ".div, td"
				}).selectable({
					cancel: ".handle",
					filter: ".select",
					selected: function(event, ui){
						var selected = $(ui.selected);
						var parent = selected.parent();
						var children = parent.children();
						for (var i=0; i<children.length; i++){
							if (!$(children[i]).hasClass("ui-selected")){
								$(children[i]).addClass("ui-selected");
							}
						}						
						$(selected.children()[0]).prop("checked", true);
					},
					unselected: function(event, ui){
						var unselected = $(ui.unselected);
						var parent = unselected.parent();
						var children = parent.children();
						for (var i=0; i<children.length; i++){
							if ($(children[i]).hasClass("ui-selected")){
								$(children[i]).removeClass("ui-selected");
							}
						}						
						$(unselected.children()[0]).prop("checked", false);
					}
				});
			});
		</script>
	</head>
	<body>
		<div class="container">
			<div class="control">
				<div class="handle">
					
				</div>
				<div class="content">
					<div class="select"><input type="checkbox"/>Control Name</div>
					<div></div>
				</div>
			</div>

			<div class="control">
				<div class="handle">
				</div>
				<div class="content">
					<div class="select"><input type="checkbox"/>DIV</div>
					<div class="div">
						<div class="control">
							<div class="handle"></div>
							<div class="content">
								<div class="select"><input type="checkbox"/>Control Name</div>
								<div></div>
							</div>
						</div>
					</div>
				</div>
			</div>

			<div class="control">
				<div class="handle"></div>
				<div class="content">
					<div class="select"><input type="checkbox"/>Table</div>
					<div class="content">
						<table>
							<tr>
								<td>
									<div class="control">
										<div class="handle"></div>
										<div class="content">
											<div class="select"><input type="checkbox"/>Control Name</div>
											<div></div>
										</div>
									</div>
								</td>
								<td>
									<div class="control">
										<div class="handle"></div>
										<div class="content">
											<div class="select"><input type="checkbox"/>Control Name</div>
											<div></div>
										</div>
									</div>
								</td>
							</tr>
							<tr>
								<td>
									<div class="control">
										<div class="handle"></div>
										<div class="content">
											<div class="select"><input type="checkbox"/>Control Name</div>
											<div></div>
										</div>
									</div>
								</td>
								<td>
									<div class="control">
										<div class="handle"></div>
										<div class="content">
											<div class="select"><input type="checkbox"/>Control Name</div>
											<div></div>
										</div>
									</div>
								</td>
							</tr>
						</table>
					</div>
				</div>
			</div>
		</div>
	</body>
</html>
